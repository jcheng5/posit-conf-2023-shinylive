// Shinylive 0.1.6.9001
// Copyright 2023 RStudio, PBC
var D=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Oe=`// src/messageportwebsocket.ts
var MessagePortWebSocket = class extends EventTarget {
  constructor(port) {
    super();
    this.readyState = 0;
    this.addEventListener("open", (e) => {
      if (this.onopen) {
        this.onopen(e);
      }
    });
    this.addEventListener("message", (e) => {
      if (this.onmessage) {
        this.onmessage(e);
      }
    });
    this.addEventListener("error", (e) => {
      if (this.onerror) {
        this.onerror(e);
      }
    });
    this.addEventListener("close", (e) => {
      if (this.onclose) {
        this.onclose(e);
      }
    });
    this._port = port;
    port.addEventListener("message", this._onMessage.bind(this));
    port.start();
  }
  // Call on the server side of the connection, to tell the client that
  // the connection has been established.
  accept() {
    if (this.readyState !== 0) {
      return;
    }
    this.readyState = 1;
    this._port.postMessage({ type: "open" });
  }
  send(data) {
    if (this.readyState === 0) {
      throw new DOMException(
        "Can't send messages while WebSocket is in CONNECTING state",
        "InvalidStateError"
      );
    }
    if (this.readyState > 1) {
      return;
    }
    this._port.postMessage({ type: "message", value: { data } });
  }
  close(code, reason) {
    if (this.readyState > 1) {
      return;
    }
    this.readyState = 2;
    this._port.postMessage({ type: "close", value: { code, reason } });
    this.readyState = 3;
    this.dispatchEvent(new CloseEvent("close", { code, reason }));
  }
  _onMessage(e) {
    const event = e.data;
    switch (event.type) {
      case "open":
        if (this.readyState === 0) {
          this.readyState = 1;
          this.dispatchEvent(new Event("open"));
          return;
        }
        break;
      case "message":
        if (this.readyState === 1) {
          this.dispatchEvent(new MessageEvent("message", { ...event.value }));
          return;
        }
        break;
      case "close":
        if (this.readyState < 3) {
          this.readyState = 3;
          this.dispatchEvent(new CloseEvent("close", { ...event.value }));
          return;
        }
        break;
    }
    this._reportError(
      \`Unexpected event '\${event.type}' while in readyState \${this.readyState}\`,
      1002
    );
  }
  _reportError(message, code) {
    this.dispatchEvent(new ErrorEvent("error", { message }));
    if (typeof code === "number") {
      this.close(code, message);
    }
  }
};

// src/shinylive-inject-socket.ts
window.Shiny.createSocket = function() {
  const channel = new MessageChannel();
  window.parent.postMessage(
    {
      type: "openChannel",
      // Infer app name from path: "/foo/app_abc123/"" => "app_abc123"
      appName: window.location.pathname.replace(
        new RegExp(".*/([^/]+)/$"),
        "$1"
      ),
      path: "/websocket/"
    },
    "*",
    [channel.port2]
  );
  return new MessagePortWebSocket(channel.port1);
};
`;function Ie(e){return new Promise(t=>setTimeout(t,e))}function J(e){return e==="/"||e===""?"":e.replace(/[/]?[^/]+[/]?$/,"")}function re(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}var wt=Object.create,Je=Object.defineProperty,gt=Object.getOwnPropertyDescriptor,mt=Object.getOwnPropertyNames,bt=Object.getPrototypeOf,vt=Object.prototype.hasOwnProperty,W=(e=>typeof D<"u"?D:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof D<"u"?D:t)[r]}):e)(function(e){if(typeof D<"u")return D.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Et=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of mt(t))!vt.call(e,l)&&l!==r&&Je(e,l,{get:()=>t[l],enumerable:!(n=gt(t,l))||n.enumerable});return e},B=(e,t,r)=>(r=e!=null?wt(bt(e)):{},Et(t||!e||!e.__esModule?Je(r,"default",{value:e,enumerable:!0}):r,e)),ge=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},R=(e,t,r)=>(ge(e,t,"read from private field"),r?r.call(e):t.get(e)),j=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},De=(e,t,r,n)=>(ge(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);var K=(e,t,r)=>(ge(e,t,"access private method"),r),Y=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUint64=e.getInt64=e.setInt64=e.setUint64=e.UINT32_MAX=void 0,e.UINT32_MAX=4294967295;function t(a,s,o){let p=o/4294967296,d=o;a.setUint32(s,p),a.setUint32(s+4,d)}e.setUint64=t;function r(a,s,o){let p=Math.floor(o/4294967296),d=o;a.setUint32(s,p),a.setUint32(s+4,d)}e.setInt64=r;function n(a,s){let o=a.getInt32(s),p=a.getUint32(s+4);return o*4294967296+p}e.getInt64=n;function l(a,s){let o=a.getUint32(s),p=a.getUint32(s+4);return o*4294967296+p}e.getUint64=l}),me=x(e=>{"use strict";var t,r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.utf8DecodeTD=e.TEXT_DECODER_THRESHOLD=e.utf8DecodeJs=e.utf8EncodeTE=e.TEXT_ENCODER_THRESHOLD=e.utf8EncodeJs=e.utf8Count=void 0;var l=Y(),a=(typeof process>"u"||((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function s(i){let c=i.length,y=0,h=0;for(;h<c;){let m=i.charCodeAt(h++);if(m&4294967168)if(!(m&4294965248))y+=2;else{if(m>=55296&&m<=56319&&h<c){let v=i.charCodeAt(h);(v&64512)===56320&&(++h,m=((m&1023)<<10)+(v&1023)+65536)}m&4294901760?y+=4:y+=3}else{y++;continue}}return y}e.utf8Count=s;function o(i,c,y){let h=i.length,m=y,v=0;for(;v<h;){let _=i.charCodeAt(v++);if(_&4294967168)if(!(_&4294965248))c[m++]=_>>6&31|192;else{if(_>=55296&&_<=56319&&v<h){let A=i.charCodeAt(v);(A&64512)===56320&&(++v,_=((_&1023)<<10)+(A&1023)+65536)}_&4294901760?(c[m++]=_>>18&7|240,c[m++]=_>>12&63|128,c[m++]=_>>6&63|128):(c[m++]=_>>12&15|224,c[m++]=_>>6&63|128)}else{c[m++]=_;continue}c[m++]=_&63|128}}e.utf8EncodeJs=o;var p=a?new TextEncoder:void 0;e.TEXT_ENCODER_THRESHOLD=a?typeof process<"u"&&((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.TEXT_ENCODING)!=="force"?200:0:l.UINT32_MAX;function d(i,c,y){c.set(p.encode(i),y)}function f(i,c,y){p.encodeInto(i,c.subarray(y))}e.utf8EncodeTE=p!=null&&p.encodeInto?f:d;var w=4096;function g(i,c,y){let h=c,m=h+y,v=[],_="";for(;h<m;){let A=i[h++];if(!(A&128))v.push(A);else if((A&224)===192){let H=i[h++]&63;v.push((A&31)<<6|H)}else if((A&240)===224){let H=i[h++]&63,te=i[h++]&63;v.push((A&31)<<12|H<<6|te)}else if((A&248)===240){let H=i[h++]&63,te=i[h++]&63,ft=i[h++]&63,L=(A&7)<<18|H<<12|te<<6|ft;L>65535&&(L-=65536,v.push(L>>>10&1023|55296),L=56320|L&1023),v.push(L)}else v.push(A);v.length>=w&&(_+=String.fromCharCode(...v),v.length=0)}return v.length>0&&(_+=String.fromCharCode(...v)),_}e.utf8DecodeJs=g;var T=a?new TextDecoder:null;e.TEXT_DECODER_THRESHOLD=a?typeof process<"u"&&((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.TEXT_DECODER)!=="force"?200:0:l.UINT32_MAX;function P(i,c,y){let h=i.subarray(c,c+y);return T.decode(h)}e.utf8DecodeTD=P}),Ge=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtData=void 0;var t=class{constructor(r,n){this.type=r,this.data=n}};e.ExtData=t}),be=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DecodeError=void 0;var t=class extends Error{constructor(r){super(r);let n=Object.create(t.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};e.DecodeError=t}),Ke=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timestampExtension=e.decodeTimestampExtension=e.decodeTimestampToTimeSpec=e.encodeTimestampExtension=e.encodeDateToTimeSpec=e.encodeTimeSpecToTimestamp=e.EXT_TIMESTAMP=void 0;var t=be(),r=Y();e.EXT_TIMESTAMP=-1;var n=4294967296-1,l=17179869184-1;function a({sec:f,nsec:w}){if(f>=0&&w>=0&&f<=l)if(w===0&&f<=n){let g=new Uint8Array(4);return new DataView(g.buffer).setUint32(0,f),g}else{let g=f/4294967296,T=f&4294967295,P=new Uint8Array(8),i=new DataView(P.buffer);return i.setUint32(0,w<<2|g&3),i.setUint32(4,T),P}else{let g=new Uint8Array(12),T=new DataView(g.buffer);return T.setUint32(0,w),(0,r.setInt64)(T,4,f),g}}e.encodeTimeSpecToTimestamp=a;function s(f){let w=f.getTime(),g=Math.floor(w/1e3),T=(w-g*1e3)*1e6,P=Math.floor(T/1e9);return{sec:g+P,nsec:T-P*1e9}}e.encodeDateToTimeSpec=s;function o(f){if(f instanceof Date){let w=s(f);return a(w)}else return null}e.encodeTimestampExtension=o;function p(f){let w=new DataView(f.buffer,f.byteOffset,f.byteLength);switch(f.byteLength){case 4:return{sec:w.getUint32(0),nsec:0};case 8:{let g=w.getUint32(0),T=w.getUint32(4),P=(g&3)*4294967296+T,i=g>>>2;return{sec:P,nsec:i}}case 12:{let g=(0,r.getInt64)(w,4),T=w.getUint32(0);return{sec:g,nsec:T}}default:throw new t.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${f.length}`)}}e.decodeTimestampToTimeSpec=p;function d(f){let w=p(f);return new Date(w.sec*1e3+w.nsec/1e6)}e.decodeTimestampExtension=d,e.timestampExtension={type:e.EXT_TIMESTAMP,encode:o,decode:d}}),ve=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionCodec=void 0;var t=Ge(),r=Ke(),n=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(r.timestampExtension)}register({type:l,encode:a,decode:s}){if(l>=0)this.encoders[l]=a,this.decoders[l]=s;else{let o=1+l;this.builtInEncoders[o]=a,this.builtInDecoders[o]=s}}tryToEncode(l,a){for(let s=0;s<this.builtInEncoders.length;s++){let o=this.builtInEncoders[s];if(o!=null){let p=o(l,a);if(p!=null){let d=-1-s;return new t.ExtData(d,p)}}}for(let s=0;s<this.encoders.length;s++){let o=this.encoders[s];if(o!=null){let p=o(l,a);if(p!=null){let d=s;return new t.ExtData(d,p)}}}return l instanceof t.ExtData?l:null}decode(l,a,s){let o=a<0?this.builtInDecoders[-1-a]:this.decoders[a];return o?o(l,a,s):new t.ExtData(a,l)}};e.ExtensionCodec=n,n.defaultCodec=new n}),Qe=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDataView=e.ensureUint8Array=void 0;function t(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?new Uint8Array(n):Uint8Array.from(n)}e.ensureUint8Array=t;function r(n){if(n instanceof ArrayBuffer)return new DataView(n);let l=t(n);return new DataView(l.buffer,l.byteOffset,l.byteLength)}e.createDataView=r}),Ye=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Encoder=e.DEFAULT_INITIAL_BUFFER_SIZE=e.DEFAULT_MAX_DEPTH=void 0;var t=me(),r=ve(),n=Y(),l=Qe();e.DEFAULT_MAX_DEPTH=100,e.DEFAULT_INITIAL_BUFFER_SIZE=2048;var a=class{constructor(s=r.ExtensionCodec.defaultCodec,o=void 0,p=e.DEFAULT_MAX_DEPTH,d=e.DEFAULT_INITIAL_BUFFER_SIZE,f=!1,w=!1,g=!1,T=!1){this.extensionCodec=s,this.context=o,this.maxDepth=p,this.initialBufferSize=d,this.sortKeys=f,this.forceFloat32=w,this.ignoreUndefined=g,this.forceIntegerToFloat=T,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(s){return this.reinitializeState(),this.doEncode(s,1),this.bytes.subarray(0,this.pos)}encode(s){return this.reinitializeState(),this.doEncode(s,1),this.bytes.slice(0,this.pos)}doEncode(s,o){if(o>this.maxDepth)throw new Error(`Too deep objects in depth ${o}`);s==null?this.encodeNil():typeof s=="boolean"?this.encodeBoolean(s):typeof s=="number"?this.encodeNumber(s):typeof s=="string"?this.encodeString(s):this.encodeObject(s,o)}ensureBufferSizeToWrite(s){let o=this.pos+s;this.view.byteLength<o&&this.resizeBuffer(o*2)}resizeBuffer(s){let o=new ArrayBuffer(s),p=new Uint8Array(o),d=new DataView(o);p.set(this.bytes),this.view=d,this.bytes=p}encodeNil(){this.writeU8(192)}encodeBoolean(s){s===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(s){Number.isSafeInteger(s)&&!this.forceIntegerToFloat?s>=0?s<128?this.writeU8(s):s<256?(this.writeU8(204),this.writeU8(s)):s<65536?(this.writeU8(205),this.writeU16(s)):s<4294967296?(this.writeU8(206),this.writeU32(s)):(this.writeU8(207),this.writeU64(s)):s>=-32?this.writeU8(224|s+32):s>=-128?(this.writeU8(208),this.writeI8(s)):s>=-32768?(this.writeU8(209),this.writeI16(s)):s>=-2147483648?(this.writeU8(210),this.writeI32(s)):(this.writeU8(211),this.writeI64(s)):this.forceFloat32?(this.writeU8(202),this.writeF32(s)):(this.writeU8(203),this.writeF64(s))}writeStringHeader(s){if(s<32)this.writeU8(160+s);else if(s<256)this.writeU8(217),this.writeU8(s);else if(s<65536)this.writeU8(218),this.writeU16(s);else if(s<4294967296)this.writeU8(219),this.writeU32(s);else throw new Error(`Too long string: ${s} bytes in UTF-8`)}encodeString(s){if(s.length>t.TEXT_ENCODER_THRESHOLD){let o=(0,t.utf8Count)(s);this.ensureBufferSizeToWrite(5+o),this.writeStringHeader(o),(0,t.utf8EncodeTE)(s,this.bytes,this.pos),this.pos+=o}else{let o=(0,t.utf8Count)(s);this.ensureBufferSizeToWrite(5+o),this.writeStringHeader(o),(0,t.utf8EncodeJs)(s,this.bytes,this.pos),this.pos+=o}}encodeObject(s,o){let p=this.extensionCodec.tryToEncode(s,this.context);if(p!=null)this.encodeExtension(p);else if(Array.isArray(s))this.encodeArray(s,o);else if(ArrayBuffer.isView(s))this.encodeBinary(s);else if(typeof s=="object")this.encodeMap(s,o);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(s)}`)}encodeBinary(s){let o=s.byteLength;if(o<256)this.writeU8(196),this.writeU8(o);else if(o<65536)this.writeU8(197),this.writeU16(o);else if(o<4294967296)this.writeU8(198),this.writeU32(o);else throw new Error(`Too large binary: ${o}`);let p=(0,l.ensureUint8Array)(s);this.writeU8a(p)}encodeArray(s,o){let p=s.length;if(p<16)this.writeU8(144+p);else if(p<65536)this.writeU8(220),this.writeU16(p);else if(p<4294967296)this.writeU8(221),this.writeU32(p);else throw new Error(`Too large array: ${p}`);for(let d of s)this.doEncode(d,o+1)}countWithoutUndefined(s,o){let p=0;for(let d of o)s[d]!==void 0&&p++;return p}encodeMap(s,o){let p=Object.keys(s);this.sortKeys&&p.sort();let d=this.ignoreUndefined?this.countWithoutUndefined(s,p):p.length;if(d<16)this.writeU8(128+d);else if(d<65536)this.writeU8(222),this.writeU16(d);else if(d<4294967296)this.writeU8(223),this.writeU32(d);else throw new Error(`Too large map object: ${d}`);for(let f of p){let w=s[f];this.ignoreUndefined&&w===void 0||(this.encodeString(f),this.doEncode(w,o+1))}}encodeExtension(s){let o=s.data.length;if(o===1)this.writeU8(212);else if(o===2)this.writeU8(213);else if(o===4)this.writeU8(214);else if(o===8)this.writeU8(215);else if(o===16)this.writeU8(216);else if(o<256)this.writeU8(199),this.writeU8(o);else if(o<65536)this.writeU8(200),this.writeU16(o);else if(o<4294967296)this.writeU8(201),this.writeU32(o);else throw new Error(`Too large extension object: ${o}`);this.writeI8(s.type),this.writeU8a(s.data)}writeU8(s){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,s),this.pos++}writeU8a(s){let o=s.length;this.ensureBufferSizeToWrite(o),this.bytes.set(s,this.pos),this.pos+=o}writeI8(s){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,s),this.pos++}writeU16(s){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,s),this.pos+=2}writeI16(s){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,s),this.pos+=2}writeU32(s){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,s),this.pos+=4}writeI32(s){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,s),this.pos+=4}writeF32(s){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,s),this.pos+=4}writeF64(s){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,s),this.pos+=8}writeU64(s){this.ensureBufferSizeToWrite(8),(0,n.setUint64)(this.view,this.pos,s),this.pos+=8}writeI64(s){this.ensureBufferSizeToWrite(8),(0,n.setInt64)(this.view,this.pos,s),this.pos+=8}};e.Encoder=a}),Rt=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var t=Ye(),r={};function n(l,a=r){return new t.Encoder(a.extensionCodec,a.context,a.maxDepth,a.initialBufferSize,a.sortKeys,a.forceFloat32,a.ignoreUndefined,a.forceIntegerToFloat).encodeSharedRef(l)}e.encode=n}),_t=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prettyByte=void 0;function t(r){return`${r<0?"-":""}0x${Math.abs(r).toString(16).padStart(2,"0")}`}e.prettyByte=t}),Tt=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CachedKeyDecoder=void 0;var t=me(),r=16,n=16,l=class{constructor(a=r,s=n){this.maxKeyLength=a,this.maxLengthPerKey=s,this.hit=0,this.miss=0,this.caches=[];for(let o=0;o<this.maxKeyLength;o++)this.caches.push([])}canBeCached(a){return a>0&&a<=this.maxKeyLength}find(a,s,o){let p=this.caches[o-1];e:for(let d of p){let f=d.bytes;for(let w=0;w<o;w++)if(f[w]!==a[s+w])continue e;return d.str}return null}store(a,s){let o=this.caches[a.length-1],p={bytes:a,str:s};o.length>=this.maxLengthPerKey?o[Math.random()*o.length|0]=p:o.push(p)}decode(a,s,o){let p=this.find(a,s,o);if(p!=null)return this.hit++,p;this.miss++;let d=(0,t.utf8DecodeJs)(a,s,o),f=Uint8Array.prototype.slice.call(a,s,s+o);return this.store(f,d),d}};e.CachedKeyDecoder=l}),Ee=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.DataViewIndexOutOfBoundsError=void 0;var t=_t(),r=ve(),n=Y(),l=me(),a=Qe(),s=Tt(),o=be(),p=i=>{let c=typeof i;return c==="string"||c==="number"},d=-1,f=new DataView(new ArrayBuffer(0)),w=new Uint8Array(f.buffer);e.DataViewIndexOutOfBoundsError=(()=>{try{f.getInt8(0)}catch(i){return i.constructor}throw new Error("never reached")})();var g=new e.DataViewIndexOutOfBoundsError("Insufficient data"),T=new s.CachedKeyDecoder,P=class{constructor(i=r.ExtensionCodec.defaultCodec,c=void 0,y=n.UINT32_MAX,h=n.UINT32_MAX,m=n.UINT32_MAX,v=n.UINT32_MAX,_=n.UINT32_MAX,A=T){this.extensionCodec=i,this.context=c,this.maxStrLength=y,this.maxBinLength=h,this.maxArrayLength=m,this.maxMapLength=v,this.maxExtLength=_,this.keyDecoder=A,this.totalPos=0,this.pos=0,this.view=f,this.bytes=w,this.headByte=d,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=d,this.stack.length=0}setBuffer(i){this.bytes=(0,a.ensureUint8Array)(i),this.view=(0,a.createDataView)(this.bytes),this.pos=0}appendBuffer(i){if(this.headByte===d&&!this.hasRemaining(1))this.setBuffer(i);else{let c=this.bytes.subarray(this.pos),y=(0,a.ensureUint8Array)(i),h=new Uint8Array(c.length+y.length);h.set(c),h.set(y,c.length),this.setBuffer(h)}}hasRemaining(i){return this.view.byteLength-this.pos>=i}createExtraByteError(i){let{view:c,pos:y}=this;return new RangeError(`Extra ${c.byteLength-y} of ${c.byteLength} byte(s) found at buffer[${i}]`)}decode(i){this.reinitializeState(),this.setBuffer(i);let c=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return c}*decodeMulti(i){for(this.reinitializeState(),this.setBuffer(i);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(i){let c=!1,y;for await(let _ of i){if(c)throw this.createExtraByteError(this.totalPos);this.appendBuffer(_);try{y=this.doDecodeSync(),c=!0}catch(A){if(!(A instanceof e.DataViewIndexOutOfBoundsError))throw A}this.totalPos+=this.pos}if(c){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return y}let{headByte:h,pos:m,totalPos:v}=this;throw new RangeError(`Insufficient data in parsing ${(0,t.prettyByte)(h)} at ${v} (${m} in the current buffer)`)}decodeArrayStream(i){return this.decodeMultiAsync(i,!0)}decodeStream(i){return this.decodeMultiAsync(i,!1)}async*decodeMultiAsync(i,c){let y=c,h=-1;for await(let m of i){if(c&&h===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(m),y&&(h=this.readArraySize(),y=!1,this.complete());try{for(;yield this.doDecodeSync(),--h!==0;);}catch(v){if(!(v instanceof e.DataViewIndexOutOfBoundsError))throw v}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let i=this.readHeadByte(),c;if(i>=224)c=i-256;else if(i<192)if(i<128)c=i;else if(i<144){let h=i-128;if(h!==0){this.pushMapState(h),this.complete();continue e}else c={}}else if(i<160){let h=i-144;if(h!==0){this.pushArrayState(h),this.complete();continue e}else c=[]}else{let h=i-160;c=this.decodeUtf8String(h,0)}else if(i===192)c=null;else if(i===194)c=!1;else if(i===195)c=!0;else if(i===202)c=this.readF32();else if(i===203)c=this.readF64();else if(i===204)c=this.readU8();else if(i===205)c=this.readU16();else if(i===206)c=this.readU32();else if(i===207)c=this.readU64();else if(i===208)c=this.readI8();else if(i===209)c=this.readI16();else if(i===210)c=this.readI32();else if(i===211)c=this.readI64();else if(i===217){let h=this.lookU8();c=this.decodeUtf8String(h,1)}else if(i===218){let h=this.lookU16();c=this.decodeUtf8String(h,2)}else if(i===219){let h=this.lookU32();c=this.decodeUtf8String(h,4)}else if(i===220){let h=this.readU16();if(h!==0){this.pushArrayState(h),this.complete();continue e}else c=[]}else if(i===221){let h=this.readU32();if(h!==0){this.pushArrayState(h),this.complete();continue e}else c=[]}else if(i===222){let h=this.readU16();if(h!==0){this.pushMapState(h),this.complete();continue e}else c={}}else if(i===223){let h=this.readU32();if(h!==0){this.pushMapState(h),this.complete();continue e}else c={}}else if(i===196){let h=this.lookU8();c=this.decodeBinary(h,1)}else if(i===197){let h=this.lookU16();c=this.decodeBinary(h,2)}else if(i===198){let h=this.lookU32();c=this.decodeBinary(h,4)}else if(i===212)c=this.decodeExtension(1,0);else if(i===213)c=this.decodeExtension(2,0);else if(i===214)c=this.decodeExtension(4,0);else if(i===215)c=this.decodeExtension(8,0);else if(i===216)c=this.decodeExtension(16,0);else if(i===199){let h=this.lookU8();c=this.decodeExtension(h,1)}else if(i===200){let h=this.lookU16();c=this.decodeExtension(h,2)}else if(i===201){let h=this.lookU32();c=this.decodeExtension(h,4)}else throw new o.DecodeError(`Unrecognized type byte: ${(0,t.prettyByte)(i)}`);this.complete();let y=this.stack;for(;y.length>0;){let h=y[y.length-1];if(h.type===0)if(h.array[h.position]=c,h.position++,h.position===h.size)y.pop(),c=h.array;else continue e;else if(h.type===1){if(!p(c))throw new o.DecodeError("The type of key must be string or number but "+typeof c);if(c==="__proto__")throw new o.DecodeError("The key __proto__ is not allowed");h.key=c,h.type=2;continue e}else if(h.map[h.key]=c,h.readCount++,h.readCount===h.size)y.pop(),c=h.map;else{h.key=null,h.type=1;continue e}}return c}}readHeadByte(){return this.headByte===d&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=d}readArraySize(){let i=this.readHeadByte();switch(i){case 220:return this.readU16();case 221:return this.readU32();default:{if(i<160)return i-144;throw new o.DecodeError(`Unrecognized array type byte: ${(0,t.prettyByte)(i)}`)}}}pushMapState(i){if(i>this.maxMapLength)throw new o.DecodeError(`Max length exceeded: map length (${i}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:i,key:null,readCount:0,map:{}})}pushArrayState(i){if(i>this.maxArrayLength)throw new o.DecodeError(`Max length exceeded: array length (${i}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:i,array:new Array(i),position:0})}decodeUtf8String(i,c){var y;if(i>this.maxStrLength)throw new o.DecodeError(`Max length exceeded: UTF-8 byte length (${i}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+c+i)throw g;let h=this.pos+c,m;return this.stateIsMapKey()&&!((y=this.keyDecoder)===null||y===void 0)&&y.canBeCached(i)?m=this.keyDecoder.decode(this.bytes,h,i):i>l.TEXT_DECODER_THRESHOLD?m=(0,l.utf8DecodeTD)(this.bytes,h,i):m=(0,l.utf8DecodeJs)(this.bytes,h,i),this.pos+=c+i,m}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(i,c){if(i>this.maxBinLength)throw new o.DecodeError(`Max length exceeded: bin length (${i}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(i+c))throw g;let y=this.pos+c,h=this.bytes.subarray(y,y+i);return this.pos+=c+i,h}decodeExtension(i,c){if(i>this.maxExtLength)throw new o.DecodeError(`Max length exceeded: ext length (${i}) > maxExtLength (${this.maxExtLength})`);let y=this.view.getInt8(this.pos+c),h=this.decodeBinary(i,c+1);return this.extensionCodec.decode(h,y,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let i=this.view.getUint8(this.pos);return this.pos++,i}readI8(){let i=this.view.getInt8(this.pos);return this.pos++,i}readU16(){let i=this.view.getUint16(this.pos);return this.pos+=2,i}readI16(){let i=this.view.getInt16(this.pos);return this.pos+=2,i}readU32(){let i=this.view.getUint32(this.pos);return this.pos+=4,i}readI32(){let i=this.view.getInt32(this.pos);return this.pos+=4,i}readU64(){let i=(0,n.getUint64)(this.view,this.pos);return this.pos+=8,i}readI64(){let i=(0,n.getInt64)(this.view,this.pos);return this.pos+=8,i}readF32(){let i=this.view.getFloat32(this.pos);return this.pos+=4,i}readF64(){let i=this.view.getFloat64(this.pos);return this.pos+=8,i}};e.Decoder=P}),Ze=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeMulti=e.decode=e.defaultDecodeOptions=void 0;var t=Ee();e.defaultDecodeOptions={};function r(l,a=e.defaultDecodeOptions){return new t.Decoder(a.extensionCodec,a.context,a.maxStrLength,a.maxBinLength,a.maxArrayLength,a.maxMapLength,a.maxExtLength).decode(l)}e.decode=r;function n(l,a=e.defaultDecodeOptions){return new t.Decoder(a.extensionCodec,a.context,a.maxStrLength,a.maxBinLength,a.maxArrayLength,a.maxMapLength,a.maxExtLength).decodeMulti(l)}e.decodeMulti=n}),At=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ensureAsyncIterable=e.asyncIterableFromStream=e.isAsyncIterable=void 0;function t(a){return a[Symbol.asyncIterator]!=null}e.isAsyncIterable=t;function r(a){if(a==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*n(a){let s=a.getReader();try{for(;;){let{done:o,value:p}=await s.read();if(o)return;r(p),yield p}}finally{s.releaseLock()}}e.asyncIterableFromStream=n;function l(a){return t(a)?a:n(a)}e.ensureAsyncIterable=l}),St=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeStream=e.decodeMultiStream=e.decodeArrayStream=e.decodeAsync=void 0;var t=Ee(),r=At(),n=Ze();async function l(p,d=n.defaultDecodeOptions){let f=(0,r.ensureAsyncIterable)(p);return new t.Decoder(d.extensionCodec,d.context,d.maxStrLength,d.maxBinLength,d.maxArrayLength,d.maxMapLength,d.maxExtLength).decodeAsync(f)}e.decodeAsync=l;function a(p,d=n.defaultDecodeOptions){let f=(0,r.ensureAsyncIterable)(p);return new t.Decoder(d.extensionCodec,d.context,d.maxStrLength,d.maxBinLength,d.maxArrayLength,d.maxMapLength,d.maxExtLength).decodeArrayStream(f)}e.decodeArrayStream=a;function s(p,d=n.defaultDecodeOptions){let f=(0,r.ensureAsyncIterable)(p);return new t.Decoder(d.extensionCodec,d.context,d.maxStrLength,d.maxBinLength,d.maxArrayLength,d.maxMapLength,d.maxExtLength).decodeStream(f)}e.decodeMultiStream=s;function o(p,d=n.defaultDecodeOptions){return s(p,d)}e.decodeStream=o}),Re=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeTimestampExtension=e.encodeTimestampExtension=e.decodeTimestampToTimeSpec=e.encodeTimeSpecToTimestamp=e.encodeDateToTimeSpec=e.EXT_TIMESTAMP=e.ExtData=e.ExtensionCodec=e.Encoder=e.DataViewIndexOutOfBoundsError=e.DecodeError=e.Decoder=e.decodeStream=e.decodeMultiStream=e.decodeArrayStream=e.decodeAsync=e.decodeMulti=e.decode=e.encode=void 0;var t=Rt();Object.defineProperty(e,"encode",{enumerable:!0,get:function(){return t.encode}});var r=Ze();Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return r.decode}}),Object.defineProperty(e,"decodeMulti",{enumerable:!0,get:function(){return r.decodeMulti}});var n=St();Object.defineProperty(e,"decodeAsync",{enumerable:!0,get:function(){return n.decodeAsync}}),Object.defineProperty(e,"decodeArrayStream",{enumerable:!0,get:function(){return n.decodeArrayStream}}),Object.defineProperty(e,"decodeMultiStream",{enumerable:!0,get:function(){return n.decodeMultiStream}}),Object.defineProperty(e,"decodeStream",{enumerable:!0,get:function(){return n.decodeStream}});var l=Ee();Object.defineProperty(e,"Decoder",{enumerable:!0,get:function(){return l.Decoder}}),Object.defineProperty(e,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return l.DataViewIndexOutOfBoundsError}});var a=be();Object.defineProperty(e,"DecodeError",{enumerable:!0,get:function(){return a.DecodeError}});var s=Ye();Object.defineProperty(e,"Encoder",{enumerable:!0,get:function(){return s.Encoder}});var o=ve();Object.defineProperty(e,"ExtensionCodec",{enumerable:!0,get:function(){return o.ExtensionCodec}});var p=Ge();Object.defineProperty(e,"ExtData",{enumerable:!0,get:function(){return p.ExtData}});var d=Ke();Object.defineProperty(e,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return d.EXT_TIMESTAMP}}),Object.defineProperty(e,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return d.encodeDateToTimeSpec}}),Object.defineProperty(e,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return d.encodeTimeSpecToTimestamp}}),Object.defineProperty(e,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return d.decodeTimestampToTimeSpec}}),Object.defineProperty(e,"encodeTimestampExtension",{enumerable:!0,get:function(){return d.encodeTimestampExtension}}),Object.defineProperty(e,"decodeTimestampExtension",{enumerable:!0,get:function(){return d.decodeTimestampExtension}})}),_e=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};var je=class extends _e{};var I=typeof process<"u"&&process.release&&process.release.name==="node",se;if(globalThis.document)se=e=>new Promise((t,r)=>{let n=document.createElement("script");n.src=e,n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)});else if(globalThis.importScripts)se=async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await Promise.resolve().then(()=>B(W(e)));else throw t}};else if(I)se=async e=>{let t=(await Promise.resolve().then(()=>B(W("path")))).default;await Promise.resolve().then(()=>B(W(t.resolve(e))))};else throw new _e("Cannot determine runtime environment");var xt=new WeakMap;function Ut(e,t){return xt.set(e,t),e}var zr=B(Re()),Xr=new TextEncoder;var Ce,Le,kt,Mt;Ce=new WeakMap,Le=new WeakMap,kt=new WeakSet,Mt=function(){R(this,Ce).push(new Promise(e=>{R(this,Le).push(e)}))};function We(e,t,r){return Pt({type:"response",data:{uuid:e,resp:t}},r)}function Pt(e,t){return t&&Ut(e,t),e}var Ot;Ot=new WeakMap;var Jr=B(Re()),Gr=new TextDecoder("utf-8"),It,Dt,jt,Ct,Lt;It=new WeakMap,Dt=new WeakMap,jt=new WeakMap,Ct=new WeakMap,Lt=new WeakMap;var Kr=new Int32Array(new ArrayBuffer(4));var u={};function Wt(e){Object.keys(e).forEach(t=>u._free(e[t]))}I&&(globalThis.Worker=W("worker_threads").Worker);var Bt,qt,Nt,ne;Bt=new WeakMap,qt=new WeakSet,Nt=function(e){I?e.on("message",t=>{R(this,ne).call(this,e,t)}):e.onmessage=t=>R(this,ne).call(this,e,t.data)},ne=new WeakMap;var Ft,$t,Ht,Vt;Ft=new WeakMap,$t=new WeakMap,Ht=new WeakMap,Vt=new WeakMap;var Qr=B(Re());I&&(globalThis.Worker=W("worker_threads").Worker);var ie,ae,oe,zt,Xt,Be,qe,Jt,Gt,le;ie=new WeakMap,ae=new WeakMap,oe=new WeakMap,zt=new WeakSet,Xt=async function(e){De(this,ae,await navigator.serviceWorker.register(e)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var r;(r=R(this,ae))==null||r.unregister()});let t=await new Promise(r=>{navigator.serviceWorker.addEventListener("message",function n(l){l.data.type==="registration-successful"&&(navigator.serviceWorker.removeEventListener("message",n),r(l.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",r=>{K(this,Be,qe).call(this,r)}),t},Be=new WeakSet,qe=async function(e){if(e.data.type==="request"){let t=e.data.data,r=R(this,ie).get(t);if(!r)throw new je("Request not found during service worker XHR request");switch(R(this,ie).delete(t),r.type){case"read":{let n=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:We(t,n)});break}case"interrupt":{let n=R(this,oe);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:We(t,n)}),this.inputQueue.reset(),De(this,oe,!1);break}default:throw new je(`Unsupported request type '${r.type}'.`)}return}},Jt=new WeakSet,Gt=function(e){I?e.on("message",t=>{R(this,le).call(this,e,t)}):e.onmessage=t=>R(this,le).call(this,e,t.data)},le=new WeakMap;var Kt,Qt,Yt,Zt,er,tr;Kt=new WeakMap,Qt=new WeakMap,Yt=new WeakMap,Zt=new WeakMap,er=new WeakMap,tr=new WeakMap;I&&(globalThis.Worker=W("worker_threads").Worker);var rr,sr,nr,ce;rr=new WeakMap,sr=new WeakSet,nr=function(e){I?e.on("message",t=>{R(this,ce).call(this,e,t)}):e.onmessage=t=>R(this,ce).call(this,e,t.data)},ce=new WeakMap;var ir,ar,or,lr,cr,hr;ir=new WeakMap,ar=new WeakMap,or=new WeakMap,lr=new WeakMap,cr=new WeakMap,hr=new WeakMap;var ur={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2,PostMessage:3};var dr=I?__dirname+"/":"https://webr.r-wasm.org/v0.2.1/",pr="https://repo.r-wasm.org";var E={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function et(e){return e&&typeof e=="object"&&Object.keys(E).includes(e.type)}function tt(e){return e&&typeof e=="object"&&"re"in e&&"im"in e}function he(e){return u._Rf_protect(O(e)),e}function k(e,t){return u._Rf_protect(O(e)),++t.n,e}function fr(e){let t=u._malloc(4);return u._R_ProtectWithIndex(O(e),t),{loc:u.getValue(t,"i32"),ptr:t}}function yr(e){u._Rf_unprotect(1),u._free(e.ptr)}function wr(e,t){return u._R_Reprotect(O(e),t.loc),e}function M(e){u._Rf_unprotect(e)}function Ne(e,t,r){u._Rf_defineVar(O(t),O(r),O(e))}function gr(e,t){let r={},n={n:0};try{let l=new st(t);k(l,n),r.code=u.allocateUTF8(e);let a=u._R_ParseEvalString(r.code,l.ptr);return b.wrap(a)}finally{Wt(r),M(n.n)}}function Z(e,t){return u.getWasmTableEntry(u.GOT.ffi_safe_eval.value)(O(e),O(t))}function O(e){return Er(e)?e.ptr:e}function C(e,t){if(u._TYPEOF(e.ptr)!==E[t])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${t}"`)}function mr(e){if(et(e))return new(dt(E[e.type]))(e);if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new rt;if(e===null)return new z({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new z(e);if(typeof e=="number")return new Se(e);if(typeof e=="string")return new F(e);if(tt(e))return new xe(e);if(Array.isArray(e))return br(e);throw new Error("Robj construction for this JS object is not yet supported")}function br(e){let t={n:0};try{let r=new ee([new N("c"),...e]);return k(r,t),r.eval()}finally{M(t.n)}}var S=class{constructor(e){this.ptr=e}type(){let e=u._TYPEOF(this.ptr);return Object.keys(E).find(t=>E[t]===e)}},V,Q,q=class extends S{constructor(e){if(!(e instanceof S))return mr(e);super(e.ptr),j(this,V)}static wrap(e){let t=u._TYPEOF(e);return new(dt(t))(new S(e))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(e){return U[e]}getPropertyValue(e){return this[e]}inspect(){gr(".Internal(inspect(x))",{x:this})}isNull(){return u._TYPEOF(this.ptr)===E.null}isUnbound(){return this.ptr===U.unboundValue.ptr}attrs(){return Te.wrap(u._ATTRIB(this.ptr))}setNames(e){let t;if(e===null)t=U.null;else if(Array.isArray(e)&&e.every(r=>typeof r=="string"||r===null))t=new F(e);else throw new Error("Argument to setNames must be null or an Array of strings or null");return u._Rf_setAttrib(this.ptr,U.namesSymbol.ptr,t.ptr),this}names(){let e=F.wrap(u._Rf_getAttrib(this.ptr,U.namesSymbol.ptr));return e.isNull()?null:e.toArray()}includes(e){let t=this.names();return t&&t.includes(e)}toJs(e={depth:0},t=1){throw new Error("This R object cannot be converted to JS")}subset(e){return K(this,V,Q).call(this,e,U.bracketSymbol.ptr)}get(e){return K(this,V,Q).call(this,e,U.bracket2Symbol.ptr)}getDollar(e){return K(this,V,Q).call(this,e,U.dollarSymbol.ptr)}pluck(...e){let t=fr(U.null);try{let r=(l,a)=>{let s=l.get(a);return wr(s,t)},n=e.reduce(r,this);return n.isNull()?void 0:n}finally{yr(t)}}set(e,t){let r={n:0};try{let n=new q(e);k(n,r);let l=new q(t);k(l,r);let a=new N("[[<-"),s=u._Rf_lang4(a.ptr,this.ptr,n.ptr,l.ptr);return k(s,r),q.wrap(Z(s,U.baseEnv))}finally{M(r.n)}}static getMethods(e){let t=new Set,r=e;do Object.getOwnPropertyNames(r).map(n=>t.add(n));while(r=Object.getPrototypeOf(r));return[...t.keys()].filter(n=>typeof e[n]=="function")}},b=q;V=new WeakSet,Q=function(e,t){let r={n:0};try{let n=new q(e);k(n,r);let l=u._Rf_lang3(t,this.ptr,n.ptr);return k(l,r),q.wrap(Z(l,U.baseEnv))}finally{M(r.n)}};var rt=class extends b{constructor(){return super(new S(u.getValue(u._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},N=class extends b{constructor(e){if(e instanceof S){C(e,"symbol"),super(e);return}let t=u.allocateUTF8(e);try{super(new S(u._Rf_install(t)))}finally{u._free(t)}}toJs(){let e=this.toObject();return{type:"symbol",printname:e.printname,symvalue:e.symvalue,internal:e.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return Ae.wrap(u._PRINTNAME(this.ptr))}symvalue(){return b.wrap(u._SYMVALUE(this.ptr))}internal(){return b.wrap(u._INTERNAL(this.ptr))}},Te=class extends b{constructor(e){if(e instanceof S)return C(e,"pairlist"),super(e),this;let t={n:0};try{let{names:r,values:n}=X(e),l=Te.wrap(u._Rf_allocList(n.length));k(l,t);for(let[a,s]=[0,l];!s.isNull();[a,s]=[a+1,s.cdr()])s.setcar(new b(n[a]));l.setNames(r),super(l)}finally{M(t.n)}}get length(){return this.toArray().length}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:r=1}={}){let n=this.entries({depth:r}),l=n.map(([a,s])=>a);if(!e&&new Set(l).size!==l.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&l.some(a=>!a))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,s)=>n.findIndex(o=>o[0]===a[0])===s))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((r,n)=>[t.names?t.names[n]:null,r])}toJs(e={depth:0},t=1){let r=[],n=!1,l=[];for(let a=this;!a.isNull();a=a.cdr()){let s=a.tag();s.isNull()?r.push(""):(n=!0,r.push(s.toString())),e.depth&&t>=e.depth?l.push(a.car()):l.push(a.car().toJs(e,t+1))}return{type:"pairlist",names:n?r:null,values:l}}includes(e){return e in this.toObject()}setcar(e){u._SETCAR(this.ptr,e.ptr)}car(){return b.wrap(u._CAR(this.ptr))}cdr(){return b.wrap(u._CDR(this.ptr))}tag(){return b.wrap(u._TAG(this.ptr))}},ee=class extends b{constructor(e){if(e instanceof S)return C(e,"call"),super(e),this;let t={n:0};try{let{values:r}=X(e),n=r.map(a=>k(new b(a),t)),l=ee.wrap(u._Rf_allocVector(E.call,r.length));k(l,t);for(let[a,s]=[0,l];!s.isNull();[a,s]=[a+1,s.cdr()])s.setcar(n[a]);super(l)}finally{M(t.n)}}setcar(e){u._SETCAR(this.ptr,e.ptr)}car(){return b.wrap(u._CAR(this.ptr))}cdr(){return b.wrap(u._CDR(this.ptr))}eval(){return b.wrap(Z(this.ptr,U.baseEnv))}},vr=class extends b{constructor(e){if(e instanceof S)return C(e,"list"),super(e),this;let t={n:0};try{let{names:r,values:n}=X(e),l=u._Rf_allocVector(E.list,n.length);k(l,t),n.forEach((a,s)=>{u._SET_VECTOR_ELT(l,s,new b(a).ptr)}),b.wrap(l).setNames(r),super(new S(l))}finally{M(t.n)}}get length(){return u._LENGTH(this.ptr)}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:r=1}={}){let n=this.entries({depth:r}),l=n.map(([a,s])=>a);if(!e&&new Set(l).size!==l.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&l.some(a=>!a))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,s)=>n.findIndex(o=>o[0]===a[0])===s))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((r,n)=>[t.names?t.names[n]:null,r])}toJs(e={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(r=>e.depth&&t>=e.depth?this.get(r+1):this.get(r+1).toJs(e,t+1))}}},G=class extends b{exec(...e){let t={n:0};try{let r=new ee([this,...e]);return k(r,t),r.eval()}finally{M(t.n)}}},Ae=class extends b{constructor(e){if(e instanceof S){C(e,"string"),super(e);return}let t=u.allocateUTF8(e);try{super(new S(u._Rf_mkChar(t)))}finally{u._free(t)}}toString(){return u.UTF8ToString(u._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},st=class extends b{constructor(e={}){if(e instanceof S)return C(e,"environment"),super(e),this;let t=0;try{let{names:r,values:n}=X(e),l=he(u._R_NewEnv(U.globalEnv.ptr,0,0));++t,n.forEach((a,s)=>{let o=r?r[s]:null;if(!o)throw new Error("Can't create object in new environment with empty symbol name");let p=new N(o),d=he(new b(a));try{Ne(l,p,d)}finally{M(1)}}),super(new S(l))}finally{M(t)}}ls(e=!1,t=!0){return F.wrap(u._R_lsInternal3(this.ptr,Number(e),Number(t))).toArray()}bind(e,t){let r=new N(e),n=he(new b(t));try{Ne(this,r,n)}finally{M(1)}}names(){return this.ls(!0,!0)}frame(){return b.wrap(u._FRAME(this.ptr))}subset(e){if(typeof e=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(e)}toObject({depth:e=0}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(r=>[t[r],this.getDollar(t[r]).toJs({depth:e})]))}toJs(e={depth:0},t=1){let r=this.names(),n=[...Array(r.length).keys()].map(l=>e.depth&&t>=e.depth?this.getDollar(r[l]):this.getDollar(r[l]).toJs(e,t+1));return{type:"environment",names:r,values:n}}},$=class extends b{constructor(e,t,r){if(e instanceof S)return C(e,t),super(e),this;let n={n:0};try{let{names:l,values:a}=X(e),s=u._Rf_allocVector(E[t],a.length);k(s,n),a.forEach(r(s)),b.wrap(s).setNames(l),super(new S(s))}finally{M(n.n)}}get length(){return u._LENGTH(this.ptr)}get(e){return super.get(e)}subset(e){return super.subset(e)}getDollar(e){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let e={n:0};try{let t=u._Rf_lang2(new N("is.na").ptr,this.ptr);k(t,e);let r=z.wrap(Z(t,U.baseEnv));k(r,e);let n=r.toTypedArray();return Array.from(n).map(l=>!!l)}finally{M(e.n)}}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:e[r])}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1}={}){let r=this.entries(),n=r.map(([l,a])=>l);if(!e&&new Set(n).size!==n.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&n.some(l=>!l))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(r.filter((l,a)=>r.findIndex(s=>s[0]===l[0])===a))}entries(){let e=this.toArray(),t=this.names();return e.map((r,n)=>[t?t[n]:null,r])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},ue,nt=class extends ${constructor(e){super(e,"logical",R(nt,ue))}getBoolean(e){return this.get(e).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getBoolean(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return e}toTypedArray(){return new Int32Array(u.HEAP32.subarray(u._LOGICAL(this.ptr)/4,u._LOGICAL(this.ptr)/4+this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:!!e[r])}},z=nt;ue=new WeakMap,j(z,ue,e=>{let t=u._LOGICAL(e),r=u.getValue(u._R_NaInt,"i32");return(n,l)=>{u.setValue(t+4*l,n===null?r:!!n,"i32")}});var de,it=class extends ${constructor(e){super(e,"integer",R(it,de))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Int32Array(u.HEAP32.subarray(u._INTEGER(this.ptr)/4,u._INTEGER(this.ptr)/4+this.length))}},at=it;de=new WeakMap,j(at,de,e=>{let t=u._INTEGER(e),r=u.getValue(u._R_NaInt,"i32");return(n,l)=>{u.setValue(t+4*l,n===null?r:Math.round(Number(n)),"i32")}});var pe,ot=class extends ${constructor(e){super(e,"double",R(ot,pe))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Float64Array(u.HEAPF64.subarray(u._REAL(this.ptr)/8,u._REAL(this.ptr)/8+this.length))}},Se=ot;pe=new WeakMap,j(Se,pe,e=>{let t=u._REAL(e),r=u.getValue(u._R_NaReal,"double");return(n,l)=>{u.setValue(t+8*l,n===null?r:n,"double")}});var fe,lt=class extends ${constructor(e){super(e,"complex",R(lt,fe))}getComplex(e){return this.get(e).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getComplex(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS object");return e}toTypedArray(){return new Float64Array(u.HEAPF64.subarray(u._COMPLEX(this.ptr)/8,u._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:{re:e[2*r],im:e[2*r+1]})}},xe=lt;fe=new WeakMap,j(xe,fe,e=>{let t=u._COMPLEX(e),r=u.getValue(u._R_NaReal,"double");return(n,l)=>{u.setValue(t+8*(2*l),n===null?r:n.re,"double"),u.setValue(t+8*(2*l+1),n===null?r:n.im,"double")}});var ye,ct=class extends ${constructor(e){super(e,"character",R(ct,ye))}getString(e){return this.get(e).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getString(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS string");return e}toTypedArray(){return new Uint32Array(u.HEAPU32.subarray(u._STRING_PTR(this.ptr)/4,u._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((e,t)=>e?null:u.UTF8ToString(u._R_CHAR(u._STRING_ELT(this.ptr,t))))}},F=ct;ye=new WeakMap,j(F,ye,e=>(t,r)=>{t===null?u._SET_STRING_ELT(e,r,U.naString.ptr):u._SET_STRING_ELT(e,r,new Ae(t).ptr)});var we,ht=class extends ${constructor(e){super(e,"raw",R(ht,we))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Uint8Array(u.HEAPU8.subarray(u._RAW(this.ptr),u._RAW(this.ptr)+this.length))}},ut=ht;we=new WeakMap,j(ut,we,e=>{let t=u._RAW(e);return(r,n)=>{u.setValue(t+n,Number(r),"i8")}});function X(e){return et(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!tt(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function dt(e){let t={[E.null]:rt,[E.symbol]:N,[E.pairlist]:Te,[E.closure]:G,[E.environment]:st,[E.call]:ee,[E.special]:G,[E.builtin]:G,[E.string]:Ae,[E.logical]:z,[E.integer]:at,[E.double]:Se,[E.complex]:xe,[E.character]:F,[E.list]:vr,[E.raw]:ut,[E.function]:G};return e in t?t[e]:b}function Er(e){return e instanceof b}var U;var Fe,$e,He,Ve,ze,Rr,_r,Tr,Ar,Sr,xr,Ur;Fe=new WeakMap,$e=new WeakMap,He=new WeakMap,Ve=new WeakMap,ze=new WeakMap,Rr=new WeakMap,_r=new WeakMap,Tr=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,xr=new WeakSet,Ur=async function(){for(;;){let e=await this.webR.read();switch(e.type){case"stdout":R(this,Fe).call(this,e.data);break;case"stderr":R(this,$e).call(this,e.data);break;case"prompt":R(this,He).call(this,e.data);break;case"canvas":e.data.event==="canvasImage"?R(this,Ve).call(this,e.data.image):e.data.event==="canvasNewPage"&&R(this,ze).call(this);break;case"closed":return;default:console.warn(`Unhandled output type for webR Console: ${e.type}.`)}}};var kr={FONTCONFIG_PATH:"/etc/fonts",R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0"},Yr={RArgs:[],REnv:kr,baseUrl:dr,serviceWorkerUrl:"",repoUrl:pr,homedir:"/home/web_user",interactive:!0,channelType:ur.Automatic,createLazyFilesystem:!0},Xe,Mr,Pr,Or;Xe=new WeakMap,Mr=new WeakMap,Pr=new WeakSet,Or=async function(){for(;;){let e=await R(this,Xe).readSystem();switch(e.type){case"setTimeoutWasm":setTimeout((t,r)=>{this.invokeWasmFunction(t,...r)},e.data.delay,e.data.ptr,e.data.args);break;case"console.log":console.log(e.data);break;case"console.warn":console.warn(e.data);break;case"console.error":console.error(e.data);break;default:throw new _e("Unknown system message type `"+e.type+"`")}}};var Ir,Dr,jr;Ir=new WeakMap,Dr=new WeakMap,jr=new WeakMap;async function pt(e,t,r,n=l=>l){(typeof t=="string"||typeof r<"u")&&(t=new Request(t,r));let l=new MessageChannel,a=l.port1;e.postMessage({type:"makeRequest",scope:Lr(t)},[l.port2]);let s=await t.blob();if(!s.size)a.postMessage({type:"http.request",more_body:!1});else{let o=s.stream().getReader();try{for(;;){let{value:p,done:d}=await o.read();if(a.postMessage({type:"http.request",body:p,more_body:!d}),d)break}}finally{o.releaseLock()}}return new Promise(o=>{let p,d=new ReadableStream({start(w){p=w},cancel(w){}}),f;a.addEventListener("message",w=>{let g=w.data;if(g.type==="http.response.start")f=Wr(g,d),o(f);else if(g.type==="http.response.body")g.body&&p.enqueue(n(g.body,f)),g.more_body||(p.close(),a.close());else throw new Error("Unexpected event type from clientPort: "+g.type)}),a.start()})}function Cr(e){let t=[];for(let[r,n]of e.entries())t.push([r,n]);return t}function Lr(e){let t=new URL(e.url);return{type:"http",asgi:{version:"3.0",spec_version:"2.1"},http_version:"1.1",method:e.method,scheme:t.protocol.replace(/:$/,""),path:t.pathname,query_string:t.search.replace(/^\?/,""),root_path:"",headers:Cr(e.headers)}}function Wr(e,t){return new Response(t,{headers:e.headers,status:e.status})}var Br=!1,Me="::prismExperimentsServiceworker",Pe="v6";function Ue(e){let t=new Headers(e.headers);return t.set("Cross-Origin-Embedder-Policy","require-corp"),t.set("Cross-Origin-Resource-Policy","cross-origin"),t.set("Cross-Origin-Opener-Policy","same-origin"),new Response(e.body,{status:e.status,statusText:e.statusText,headers:t})}self.addEventListener("install",e=>{e.waitUntil(Promise.all([self.skipWaiting(),caches.open(Pe+Me)]))});self.addEventListener("activate",function(e){e.waitUntil((async()=>{await self.clients.claim();let t=await caches.keys();return Promise.all(t.filter(function(r){return r.indexOf(Pe+Me)!==0}).map(function(r){return caches.delete(r)}))})())});self.addEventListener("fetch",function(e){let t=e.request,r=new URL(t.url);if(self.location.origin!==r.origin||r.pathname=="/esbuild")return;let n=J(self.location.pathname);if(r.pathname==`${n}/shinylive-inject-socket.js`){e.respondWith(new Response(Oe,{headers:{"Content-Type":"text/javascript"},status:200}));return}let l=r.searchParams.get("coi")==="1"||t.referrer.includes("coi=1"),a=/.*\/(app_[^/]+\/)/,s=a.exec(r.pathname);if(s){e.respondWith((async()=>{let o=5;for(;!ke[s[1]];){if(o==0)return new Response(`Couldn't find parent page for ${r}. This may be because the Service Worker has updated. Try reloading the page.`,{status:404});console.log("App URL not registered. Waiting 50ms."),await Ie(50),o--}r.pathname=r.pathname.replace(a,"/");let d=r.pathname==="/"?Nr:qr,f=await t.blob(),w=await pt(ke[s[1]],new Request(r.toString(),{method:t.method,headers:t.headers,body:t.method==="GET"||t.method==="HEAD"?void 0:f,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer}),void 0,d);return l?Ue(w):w})());return}if(t.method==="GET"){if(Br){e.respondWith((async()=>{let o=await caches.match(t);if(o)return o;try{let p=Ue(await fetch(t)),d=self.location.origin+J(self.location.pathname);return(t.url.startsWith(d+"/shinylive/")||t.url===d+"/favicon.ico")&&(await caches.open(Pe+Me)).put(t,p.clone()),p}catch{return new Response("Failed to find in cache, or fetch.",{status:404})}})());return}e.respondWith((async()=>{let o=await fetch(t);return l?Ue(o):o})())}});var ke={};(async()=>{let e=await self.clients.matchAll();for(let t of e)t.postMessage({type:"serviceworkerStart"})})();self.addEventListener("message",e=>{let t=e.data;if(t.type==="configureProxyPath"){let r=t.path,n=e.ports[0];ke[r]=n}});function qr(e,t){return e}function Nr(e,t){let r=t.headers.get("content-type");if(r&&/^text\/html(;|$)/.test(r)){let n=re(e),l=J(self.location.pathname),a=n.replace(/<\/head>/,`<script src="${l}/shinylive-inject-socket.js" type="module"><\/script>
</head>`);return Uint8Array.from(a.split("").map(o=>o.charCodeAt(0)))}return e}
